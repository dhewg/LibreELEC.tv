# SPDX-License-Identifier: GPL-2.0
# Copyright (C) 2019-present Team LibreELEC (https://libreelec.tv)

SRCDIR="$BUILD/image/system/usr/share/bootloader"

mkdir -p "$RELEASE_DIR/3rdparty/bootloader"
  cp -a $SRCDIR/*.scr $SRCDIR/*script $RELEASE_DIR/3rdparty/bootloader

  if find_file_path bootloader/${UBOOT_SYSTEM}.ini; then
    cp -av ${FOUND_PATH} $RELEASE_DIR/3rdparty/bootloader/boot.ini
  fi

mkdir -p "$RELEASE_DIR/3rdparty/bootloader/dtb"
  case ${DEVICE:-$PROJECT} in
    AMLGX)
      cp -a $SRCDIR/*gxbb*.dtb $RELEASE_DIR/3rdparty/bootloader/dtb
      cp -a $SRCDIR/*gxl*.dtb $RELEASE_DIR/3rdparty/bootloader/dtb
      cp -a $SRCDIR/*gxm*.dtb $RELEASE_DIR/3rdparty/bootloader/dtb
      ;;
    AMLG12)
      cp -a $SRCDIR/*g12a*.dtb $RELEASE_DIR/3rdparty/bootloader/dtb
      cp -a $SRCDIR/*g12b*.dtb $RELEASE_DIR/3rdparty/bootloader/dtb
      ;;
    *)
      cp -a $SRCDIR/*.dtb $RELEASE_DIR/3rdparty/bootloader/dtb
      ;;
  esac
